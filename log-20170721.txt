2017-07-21 08:00:16.860 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Waiting for server dependencies to come up
2017-07-21 08:00:16.915 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Postgres database" on "postgres" port 5432
2017-07-21 08:00:16.970 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Hangfire database" on "hangfire-db" port 5432
2017-07-21 08:00:16.972 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Redis database" on "repo-cache" port 6379
2017-07-21 08:00:17.390 +00:00 [INF] [] Start installing Hangfire SQL objects...
2017-07-21 08:00:17.423 +00:00 [INF] [] Hangfire SQL objects installed.
2017-07-21 08:00:17.671 +00:00 [INF] [Unity.Publishing.Engine.Configuration.ConfigurationReader] File "../../jobs.Docker.json" is read for environment - "Docker" 
2017-07-21 08:00:18.205 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Starting application in Docker environment ...
2017-07-21 08:00:18.216 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 08:00:18.217 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 08:00:18.218 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 08:00:18.219 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 08:00:18.219 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 08:00:18.220 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 08:00:18.220 +00:00 [INF] []     Worker count: 1
2017-07-21 08:00:18.221 +00:00 [INF] []     Listening queues: 'stripagent01'
2017-07-21 08:00:18.221 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 08:00:18.221 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 08:00:18.238 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 08:00:18.238 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 08:00:18.239 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 08:00:18.239 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 08:00:18.239 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 08:00:18.240 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 08:00:18.240 +00:00 [INF] []     Worker count: 1
2017-07-21 08:00:18.240 +00:00 [INF] []     Listening queues: 'stripagent02'
2017-07-21 08:00:18.240 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 08:00:18.241 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 08:00:18.241 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 08:00:18.259 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 08:00:18.261 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 08:00:18.261 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 08:00:18.262 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 08:00:18.262 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 08:00:18.262 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 08:00:18.263 +00:00 [INF] []     Worker count: 4
2017-07-21 08:00:18.264 +00:00 [INF] []     Listening queues: 'default'
2017-07-21 08:00:18.264 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 08:00:18.265 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 08:00:18.266 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 08:00:18.276 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 08:00:18.506 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 08:00:18.519 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 08:00:18.529 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 08:00:18.534 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 08:00:18.548 +00:00 [INF] [] 3 servers were removed due to timeout
2017-07-21 08:00:18.550 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 08:00:18.558 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 08:00:18.558 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 08:00:18.564 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 08:00:18.577 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 08:00:18.578 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 08:00:18.596 +00:00 [DBG] [] Background process 'Worker #a9e6886f' started.
2017-07-21 08:00:18.602 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 08:00:18.602 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 08:00:18.615 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 08:00:18.618 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 08:00:18.625 +00:00 [DBG] [] Background process 'Worker #4097f3a4' started.
2017-07-21 08:00:18.632 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 08:00:18.632 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 08:00:18.634 +00:00 [DBG] [] Background process 'Worker #77b7e7cb' started.
2017-07-21 08:00:18.640 +00:00 [DBG] [] Background process 'Worker #deb3b3c4' started.
2017-07-21 08:00:18.649 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 08:00:18.651 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 08:00:18.655 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 08:00:18.657 +00:00 [DBG] [] Background process 'Worker #2838dc67' started.
2017-07-21 08:00:18.664 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 08:00:18.664 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 08:00:18.666 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 08:00:18.669 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 08:00:18.670 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 08:00:18.676 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 08:00:18.678 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 08:00:18.681 +00:00 [DBG] [] Background process 'Worker #69c53034' started.
2017-07-21 08:00:18.709 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 08:00:18.728 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 08:00:18.747 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 08:00:18.774 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 08:00:18.842 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Started application
2017-07-21 08:00:18.843 +00:00 [INF] [ConsoleHost.Run] Press Ctrl-C to shut down.
2017-07-21 08:01:02.057 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from ScdPublication p in DbSet<ScdPublication>
where (int) p.Status == (int) __status_0
select p)
.Count()'
2017-07-21 08:01:02.062 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'from IGrouping<string, Build> g in 
    (from Build b in DbSet<Build>
    where (int) b.Status == 6 && b.Version != null && !(
        (from ScdPublication <generated>_1 in b.ScdPublications
        select <generated>_1)
        .Any()) && !(
        (from ScdPublication p in DbSet<ScdPublication>
        where p.VersionTag == b.Version
        select p)
        .Any())
    select b)
    .GroupBy([b].RevisionShort, [b])
select 
    (from Build <generated>_1 in g
    select <generated>_1)
    .First()'
2017-07-21 08:01:02.092 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from ScdPublication p in DbSet<ScdPublication>
where (int) p.Status == (int) __status_0
select p)
.Count()'
2017-07-21 08:01:02.131 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'from IGrouping<string, Build> g in 
    (from Build b in DbSet<Build>
    where (int) b.Status == 6 && b.Version != null && !(
        (from ScdPublication <generated>_1 in DbSet<ScdPublication>
        where (Nullable<Guid>) Property(b, "Id") == Property(<generated>_1, "BuildId")
        select <generated>_1)
        .Any()) && !(
        (from ScdPublication p in DbSet<ScdPublication>
        where p.VersionTag == b.Version
        select p)
        .Any())
    select b)
    .GroupBy([b].RevisionShort, [b])
select 
    (from Build <generated>_1 in g
    select <generated>_1)
    .First()'
2017-07-21 08:01:02.321 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'GroupBy([b].RevisionShort, [b])' could not be translated and will be evaluated locally.
2017-07-21 08:01:02.343 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'GroupBy([b].RevisionShort, [b])' could not be translated and will be evaluated locally.
2017-07-21 08:01:02.346 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'First()' could not be translated and will be evaluated locally.
2017-07-21 08:01:02.387 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IAsyncEnumerable<int> _ToSequence(
    task: Task<int> GetResult(
        valueBuffers: IAsyncEnumerable<ValueBuffer> _Query(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT COUNT(*)::INT4
                FROM "ScdPublications" AS "p"
                WHERE "p"."Status" = @__status_0
            , 
            queryIndex: default(System.Nullable`1[System.Int32])
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 08:01:02.422 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:01:02.703 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IEnumerable<Build> _Select(
    source: IEnumerable<IGrouping<string, Build>> _GroupBy(
        source: IEnumerable<Build> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
                FROM "Builds" AS "b"
                WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
                    SELECT 1
                    FROM "ScdPublications" AS "s"
                    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
                    SELECT 1
                    FROM "ScdPublications" AS "p"
                    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
                ORDER BY "b"."RevisionShort"
            , 
            shaper: BufferedEntityShaper<Build>
        )
        , 
        keySelector: (Build b) => b.RevisionShort, 
        elementSelector: (Build b) => b
    )
    , 
    selector: (IGrouping<string, Build> g) => Build First(
        source: g
    )
)

2017-07-21 08:01:02.709 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (14ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:01:02.760 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:01:02.768 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:01:02.774 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 08:01:02.777 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:01:02.780 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:01:02.827 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 08:02:00.875 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:02:00.880 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:02:00.880 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:02:00.881 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:03:00.951 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:03:00.958 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:03:00.959 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:03:00.959 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:04:00.967 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:04:00.974 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:04:00.974 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:04:00.976 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:05:00.118 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:05:00.132 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (12ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:05:00.136 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:05:00.140 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:05:00.172 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:05:00.175 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 08:05:00.176 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:05:00.177 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 08:06:00.224 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:06:00.228 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:06:00.228 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:06:00.229 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:07:00.277 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:07:00.281 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:07:00.282 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:07:00.282 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:08:00.280 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:08:00.290 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (7ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:08:00.290 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:08:00.290 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:09:00.103 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:09:00.107 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:09:00.108 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:09:00.108 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:10:00.137 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:10:00.141 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:10:00.142 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:10:00.142 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:10:00.168 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:10:00.169 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 08:10:00.169 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:10:00.170 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 08:11:00.196 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:11:00.207 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (10ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:11:00.207 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:11:00.208 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:12:00.254 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:12:00.260 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:12:00.261 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:12:00.261 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:13:00.297 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:13:00.307 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:13:00.308 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:13:00.310 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:14:00.368 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:00.374 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (4ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:14:00.375 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:00.376 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:14:19.379 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:14:20.421 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:14:20.432 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'from JobActivityHistoryEntry entry in DbSet<JobActivityHistoryEntry>
where 
    (from Guid <generated>_1 in __jobCorrelationIds_0
    select <generated>_1)
    .Contains([entry].JobCorrelationId)
select entry'
2017-07-21 08:14:20.433 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'from JobActivityHistoryEntry entry in DbSet<JobActivityHistoryEntry>
where 
    (from Guid <generated>_1 in __jobCorrelationIds_0
    select <generated>_1)
    .Contains([entry].JobCorrelationId)
select entry'
2017-07-21 08:14:20.448 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: True
(QueryContext queryContext) => IEnumerable<JobActivityHistoryEntry> _ShapedQuery(
    queryContext: queryContext, 
    shaperCommandContext: SelectExpression: 
        SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
        FROM "JobActivityHistoryEntries" AS "entry"
        WHERE 0 = 1
    , 
    shaper: UnbufferedEntityShaper<JobActivityHistoryEntry>
)

2017-07-21 08:14:20.459 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.475 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a7e5634d-50af-4b38-b520-d10aefdefa56')
2017-07-21 08:14:20.484 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.496 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a7e5634d-50af-4b38-b520-d10aefdefa56 from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 08:14:20.510 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"a534abcc-42c3-49c2-91ae-325da782c295\"
}"
2017-07-21 08:14:20.519 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: a534abcc-42c3-49c2-91ae-325da782c295 }
2017-07-21 08:14:20.525 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:14:20.605 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.612 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:14:20.663 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:14:20.677 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:14:20.683 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.707 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 08:14:20.707 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 08:14:20.717 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IAsyncEnumerable<bool> _ToSequence(
    task: Task<bool> GetResult(
        valueBuffers: IAsyncEnumerable<ValueBuffer> _Query(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT CASE
                    WHEN EXISTS (
                        SELECT 1
                        FROM "BuildJobs" AS "j"
                        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
                    THEN TRUE::bool ELSE FALSE::bool
                END
            , 
            queryIndex: default(System.Nullable`1[System.Int32])
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 08:14:20.721 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.723 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 08:14:20.743 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.764 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.765 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:14:20.784 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 08:14:20.787 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.791 +00:00 [ERR] [Microsoft.EntityFrameworkCore.DbContext] An exception occurred in the database while saving changes.

Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
2017-07-21 08:14:20.822 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:20.823 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:14:20.824 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:14:20.825 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:14:20.828 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:14:21.837 +00:00 [WRN] [] Failed to process the job '35457': an exception occurred. Retry attempt 9 of 10 will be performed in 01:09:25.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Services.Repositories.BuildRepository.<RegisterJobCorrelationId>d__10.MoveNext() in /app/src/Publishing.Services/Repositories/BuildRepository.cs:line 132
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Engine.Managers.BuildManager.<RegisterJobCorrelationId>d__14.MoveNext() in /app/src/Publishing.Engine/Managers/BuildManager.cs:line 282
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Activity.Releases.RegisterBuildJobCorrelationIdActivity.<PerformAsync>d__3.MoveNext() in /app/src/Publishing.Activity.Releases/RegisterBuildJobCorrelationIdActivity.cs:line 27
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:15:00.400 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:15:00.411 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (9ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:15:00.412 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:15:00.412 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:15:00.455 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:15:00.457 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 08:15:00.457 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:15:00.458 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 08:16:00.498 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:16:00.504 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:16:00.506 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:16:00.507 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:17:00.531 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:00.537 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:17:00.539 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:00.541 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:17:15.502 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "My Test Job"
2017-07-21 08:17:15.507 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.508 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('2885d5fb-ec16-4756-bb6b-600a9f9de893')
2017-07-21 08:17:15.508 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.509 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 2885d5fb-ec16-4756-bb6b-600a9f9de893 from spec options:
"{
  \"message\": \"Hi there 2\"
}"
2017-07-21 08:17:15.511 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Write To Log"
2017-07-21 08:17:15.511 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.512 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.513 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.513 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.515 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.517 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Hi there 2
2017-07-21 08:17:15.518 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.518 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.522 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.523 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.525 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.526 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Write To Log"
2017-07-21 08:17:15.526 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending job "My Test Job"
2017-07-21 08:17:15.564 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "My Test Job"
2017-07-21 08:17:15.604 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.612 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('25331aee-76cb-44fc-bbd4-8b44175d0026')
2017-07-21 08:17:15.612 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.616 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 25331aee-76cb-44fc-bbd4-8b44175d0026 from spec options:
"{
  \"message\": \"Hi there 2\"
}"
2017-07-21 08:17:15.616 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Write To Log"
2017-07-21 08:17:15.616 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.616 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.623 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.624 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.629 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "My Test Job"
2017-07-21 08:17:15.636 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.637 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Hi there 2
2017-07-21 08:17:15.638 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.645 +00:00 [INF] [Unity.Publishing.Engine.Managers.ReleaseTrackManager] Cleaning unused branches
2017-07-21 08:17:15.651 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.653 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.657 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.676 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.677 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Write To Log"
2017-07-21 08:17:15.678 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending job "My Test Job"
2017-07-21 08:17:15.707 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.708 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('1bd456e8-9ad1-4fb3-9bbe-a834ede5b39c')
2017-07-21 08:17:15.709 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.715 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:17:15.718 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 1bd456e8-9ad1-4fb3-9bbe-a834ede5b39c from spec options:
"{
  \"message\": \"Hi there 2\"
}"
2017-07-21 08:17:15.719 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Write To Log"
2017-07-21 08:17:15.719 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.719 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.722 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.722 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.730 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.733 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Hi there 2
2017-07-21 08:17:15.742 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.746 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.757 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.763 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.773 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.781 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a0d44511-470c-454c-badd-8741cb217903')
2017-07-21 08:17:15.782 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.783 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 08:17:15.790 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"c3d5d2b7-3bde-462c-924c-f788462e0737\"
}"
2017-07-21 08:17:15.793 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: c3d5d2b7-3bde-462c-924c-f788462e0737 }
2017-07-21 08:17:15.797 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.799 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Write To Log"
2017-07-21 08:17:15.800 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending job "My Test Job"
2017-07-21 08:17:15.807 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:17:15.812 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.815 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.819 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.820 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.827 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.828 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:17:15.837 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.838 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 08:17:15.839 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.840 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 08:17:15.842 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.843 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 08:17:15.843 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.844 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.844 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.845 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"c3d5d2b7-3bde-462c-924c-f788462e0737\"
}"
2017-07-21 08:17:15.846 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: c3d5d2b7-3bde-462c-924c-f788462e0737 }
2017-07-21 08:17:15.847 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:17:15.847 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.847 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.850 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 08:17:15.851 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.852 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.857 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.859 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.860 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'from Branch b in DbSet<Branch>
where !(
    (from ReleaseTrack rt in DbSet<ReleaseTrack>
    where 
        (from ReleaseTrackBranch rtb in rt.ReleaseTrackBranches
        where rtb.BranchId == b.Id
        select rtb)
        .Any()
    select rt)
    .Any())
select b'
2017-07-21 08:17:15.861 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'from Branch b in DbSet<Branch>
where !(
    (from ReleaseTrack rt in DbSet<ReleaseTrack>
    where 
        (from ReleaseTrackBranch rtb in DbSet<ReleaseTrackBranch>
        where rtb.BranchId == b.Id
        where Property(rt, "Id") == Property(rtb, "ReleaseTrackId")
        select rtb)
        .Any()
    select rt)
    .Any())
select b'
2017-07-21 08:17:15.863 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.863 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.867 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.870 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.870 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.874 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: True
(QueryContext queryContext) => IAsyncEnumerable<Branch> _ShapedQuery(
    queryContext: queryContext, 
    shaperCommandContext: SelectExpression: 
        SELECT "b"."Id", "b"."Name"
        FROM "Branches" AS "b"
        WHERE NOT EXISTS (
            SELECT 1
            FROM "ReleaseTracks" AS "rt"
            WHERE EXISTS (
                SELECT 1
                FROM "ReleaseTrackBranches" AS "rtb"
                WHERE ("rtb"."BranchId" = "b"."Id") AND ("rt"."Id" = "rtb"."ReleaseTrackId")))
    , 
    shaper: BufferedEntityShaper<Branch>
)

2017-07-21 08:17:15.874 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.879 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:17:15.879 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"url\": \"<set by run options>\",
  \"stateValueRepositoryKey\": \"FileList\"
}"
2017-07-21 08:17:15.881 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"url\": \"http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\"
}"
2017-07-21 08:17:15.878 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.885 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 08:17:15.886 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.888 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.889 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.892 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 08:17:15.894 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.897 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
GetHttpFileServerFileListOptions { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", StateValueRepositoryKey: "FileList" }
2017-07-21 08:17:15.898 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.904 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.907 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.909 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Get the artifact file list"
2017-07-21 08:17:15.910 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.918 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.917 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.931 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."Name"
FROM "Branches" AS "b"
WHERE NOT EXISTS (
    SELECT 1
    FROM "ReleaseTracks" AS "rt"
    WHERE EXISTS (
        SELECT 1
        FROM "ReleaseTrackBranches" AS "rtb"
        WHERE ("rtb"."BranchId" = "b"."Id") AND ("rt"."Id" = "rtb"."ReleaseTrackId")))
2017-07-21 08:17:15.933 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.940 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.941 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.943 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:17:15.946 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"url\": \"<set by run options>\",
  \"stateValueRepositoryKey\": \"FileList\"
}"
2017-07-21 08:17:15.948 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"url\": \"http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\"
}"
2017-07-21 08:17:15.949 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
GetHttpFileServerFileListOptions { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", StateValueRepositoryKey: "FileList" }
2017-07-21 08:17:15.958 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Get the artifact file list"
2017-07-21 08:17:15.960 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.962 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.966 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.969 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.974 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:15.976 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:15.976 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:15.979 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.981 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:15.985 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Parsing url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/"
2017-07-21 08:17:15.985 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Parsing url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/"
2017-07-21 08:17:16.048 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.049 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.049 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.049 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.050 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.050 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.048 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.057 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.057 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.058 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.058 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.059 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.070 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.071 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.071 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.072 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.072 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.073 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.074 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.074 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.075 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.076 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.077 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.078 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/artifact1.txt".
2017-07-21 08:17:16.080 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.081 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.081 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.082 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.083 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.084 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.084 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.085 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.085 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.085 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.085 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.085 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/artifact1.txt".
2017-07-21 08:17:16.086 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.088 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.089 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.095 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.095 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.096 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.105 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.106 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.107 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.108 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.109 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.110 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.112 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.114 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.116 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.118 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/".
2017-07-21 08:17:16.120 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.121 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.126 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.127 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.128 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.128 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.129 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.130 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.130 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.131 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/".
2017-07-21 08:17:16.147 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.147 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.149 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.149 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.150 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.151 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/artifact3.txt".
2017-07-21 08:17:16.152 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.153 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.153 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.153 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.157 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/".
2017-07-21 08:17:16.157 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.157 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/".
2017-07-21 08:17:16.157 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt".
2017-07-21 08:17:16.157 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.158 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.158 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.158 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.158 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.159 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Found 5 files
2017-07-21 08:17:16.158 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/".
2017-07-21 08:17:16.161 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.162 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/".
2017-07-21 08:17:16.160 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Last file was: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
- size: 119 (0.0 MB) 
- time: 07/21/2017 08:17:09
2017-07-21 08:17:16.162 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.165 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/".
2017-07-21 08:17:16.166 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/" is in parent folder,so will not be read. 
2017-07-21 08:17:16.170 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/".
2017-07-21 08:17:16.175 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.178 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.180 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.180 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.181 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.181 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.180 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt".
2017-07-21 08:17:16.184 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.186 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifacts3/artifact3.txt".
2017-07-21 08:17:16.186 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.187 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.187 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.188 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt" is in parent folder,so will not be read. 
2017-07-21 08:17:16.195 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifacts2/artifact2.txt".
2017-07-21 08:17:16.196 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.190 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.205 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Get the artifact file list"
2017-07-21 08:17:16.208 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"stateValueRepositoryKey\": \"FileList\",
  \"destinationPath\": \"/app/tmp/\",
  \"resultStateValueRepositoryKey\": \"FileDownloadInfo\",
  \"filesets\": [
    \"Docker Set\"
  ]
}"
2017-07-21 08:17:16.201 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] The file or folder: "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo" is in parent folder,so will not be read. 
2017-07-21 08:17:16.224 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/artifact.txt".
2017-07-21 08:17:16.226 +00:00 [DBG] [Unity.Publishing.Services.Files.H5aiHttpFileServerParser] Reaching "/proj0-zCompleteBuild_2_21_07_2017_08_17_09_%2B0000/releasableartifacts/buildInfo".
2017-07-21 08:17:16.226 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Found 5 files
2017-07-21 08:17:16.231 +00:00 [INF] [Unity.Publishing.Activity.Releases.GetHttpFileServerFileListActivity] Last file was: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
- size: 119 (0.0 MB) 
- time: 07/21/2017 08:17:09
2017-07-21 08:17:16.235 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.236 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.237 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Download the artifacts"
2017-07-21 08:17:16.241 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.243 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.240 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.247 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.255 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.251 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.261 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.272 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.273 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Get the artifact file list"
2017-07-21 08:17:16.274 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"stateValueRepositoryKey\": \"FileList\",
  \"destinationPath\": \"/app/tmp/\",
  \"resultStateValueRepositoryKey\": \"FileDownloadInfo\",
  \"filesets\": [
    \"Docker Set\"
  ]
}"
2017-07-21 08:17:16.275 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Download the artifacts"
2017-07-21 08:17:16.279 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Getting server file list using key: "FileList" and correlation id: 69db0d71-be82-4545-8a0a-472cd3e3004d
2017-07-21 08:17:16.282 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.282 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.283 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.284 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.297 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.299 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Getting server file list using key: "FileList" and correlation id: a0d44511-470c-454c-badd-8741cb217903
2017-07-21 08:17:16.307 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.308 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifacts3/artifact3.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.308 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifact2.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.308 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.309 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", SizeInBytes: 119, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.310 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Looking up repository filesets: ["Docker Set"]
2017-07-21 08:17:16.307 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.316 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifacts3/artifact3.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.317 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifact2.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.318 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.319 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", SizeInBytes: 119, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.322 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Looking up repository filesets: ["Docker Set"]
2017-07-21 08:17:16.340 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 2 filesets
2017-07-21 08:17:16.343 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Resolving downloadable files using filesets: ["Docker Set", "Docker Set"]
2017-07-21 08:17:16.346 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 2 filesets
2017-07-21 08:17:16.348 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Resolving downloadable files using filesets: ["Docker Set", "Docker Set"]
2017-07-21 08:17:16.351 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 1 downloadable file groups with a total of 4 files
2017-07-21 08:17:16.353 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading group: "Docker Set"
2017-07-21 08:17:16.355 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 1/4
2017-07-21 08:17:16.355 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.356 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:16.351 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 1 downloadable file groups with a total of 4 files
2017-07-21 08:17:16.360 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading group: "Docker Set"
2017-07-21 08:17:16.361 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 1/4
2017-07-21 08:17:16.364 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.365 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:16.369 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.370 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.380 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.381 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.384 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 2/4
2017-07-21 08:17:16.388 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", SizeInBytes: 119, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.389 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:17:16.393 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 3/4
2017-07-21 08:17:16.394 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.400 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.404 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:17:16.406 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 4/4
2017-07-21 08:17:16.408 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:16.408 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:16.419 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.420 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.426 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.427 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.430 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.432 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Download the artifacts"
2017-07-21 08:17:16.434 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"buildId\": \"<set by run options>\",
  \"stateValueRepositoryKey\": \"FileDownloadInfo\"
}"
2017-07-21 08:17:16.436 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"c3d5d2b7-3bde-462c-924c-f788462e0737\"
}"
2017-07-21 08:17:16.441 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
PersistBuildArtifactsOptions { StateValueRepositoryKey: "FileDownloadInfo", BuildId: c3d5d2b7-3bde-462c-924c-f788462e0737 }
2017-07-21 08:17:16.443 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Persists the artifacts info after download"
2017-07-21 08:17:16.444 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.446 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.449 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.451 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.456 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.460 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting artifact info for build: c3d5d2b7-3bde-462c-924c-f788462e0737
2017-07-21 08:17:16.461 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Getting downloaded artifacts from state value repository using key: "FileDownloadInfo"
2017-07-21 08:17:16.468 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:16.480 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from BuildArtifact a in DbSet<BuildArtifact>
where a.BuildId == __buildId_0 && a.Filename == __filename_1
select a)
.FirstOrDefault()'
2017-07-21 08:17:16.482 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from BuildArtifact a in DbSet<BuildArtifact>
where a.BuildId == __buildId_0 && a.Filename == __filename_1
select a)
.FirstOrDefault()'
2017-07-21 08:17:16.491 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: True
(QueryContext queryContext) => IAsyncEnumerable<BuildArtifact> _ToSequence(
    task: Task<BuildArtifact> _FirstOrDefault(
        source: IAsyncEnumerable<BuildArtifact> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
                FROM "BuildArtifacts" AS "a"
                WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
                LIMIT 1
            , 
            shaper: UnbufferedEntityShaper<BuildArtifact>
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 08:17:16.501 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.507 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:16.510 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.527 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.528 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.538 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (9ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildArtifacts" ("Id", "BuildId", "Filename", "Md5Hash", "Url")
VALUES (@p0, @p1, @p2, @p3, @p4);
2017-07-21 08:17:16.540 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.544 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.546 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", Md5Hash: System.Byte[] }
2017-07-21 08:17:16.548 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.550 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:16.553 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.554 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.556 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.562 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildArtifacts" ("Id", "BuildId", "Filename", "Md5Hash", "Url")
VALUES (@p0, @p1, @p2, @p3, @p4);
2017-07-21 08:17:16.563 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.569 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.573 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:16.574 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.577 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:16.578 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.579 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.580 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.582 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildArtifacts" ("Id", "BuildId", "Filename", "Md5Hash", "Url")
VALUES (@p0, @p1, @p2, @p3, @p4);
2017-07-21 08:17:16.583 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.589 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.591 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:16.592 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.595 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:16.633 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.642 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.643 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.650 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p1='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "BuildArtifacts" SET "Md5Hash" = @p0
WHERE "Id" = @p1;
2017-07-21 08:17:16.650 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.653 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.654 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.655 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.657 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.658 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.661 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.662 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Persists the artifacts info after download"
2017-07-21 08:17:16.663 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:17:16.665 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:17:16.676 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:17:16.687 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:17:16.688 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.689 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.691 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.692 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.696 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.711 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:17:16.713 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:16.713 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:17:16.714 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:17:16.715 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:16.716 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:16.717 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:16.717 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:16.724 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:17.047 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:19.
System.IO.IOException: The process cannot access the file '/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt' because it is being used by another process.
   at System.IO.UnixFileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, FileStream parent)
   at System.IO.UnixFileSystem.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, FileStream parent)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.File.Open(String path, FileMode mode, FileAccess access)
   at Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity.<PerformAsync>d__8.MoveNext() in /app/src/Publishing.Activity.Releases/DownloadHttpFileServerFilesActivity.cs:line 112
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:17:17.373 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 1 of 10 will be performed in 00:00:24.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:17:36.498 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:17:46.007 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:17:46.011 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.014 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 08:17:46.044 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.046 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:17:46.047 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:17:46.049 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"stateValueRepositoryKey\": \"FileList\",
  \"destinationPath\": \"/app/tmp/\",
  \"resultStateValueRepositoryKey\": \"FileDownloadInfo\",
  \"filesets\": [
    \"Docker Set\"
  ]
}"
2017-07-21 08:17:46.051 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Download the artifacts"
2017-07-21 08:17:46.052 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.053 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.055 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.058 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.064 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.066 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Getting server file list using key: "FileList" and correlation id: 69db0d71-be82-4545-8a0a-472cd3e3004d
2017-07-21 08:17:46.069 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.070 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifacts3/artifact3.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.071 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts2/artifact2.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.073 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.075 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", SizeInBytes: 119, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.078 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Looking up repository filesets: ["Docker Set"]
2017-07-21 08:17:46.080 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 2 filesets
2017-07-21 08:17:46.082 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Resolving downloadable files using filesets: ["Docker Set", "Docker Set"]
2017-07-21 08:17:46.084 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Found 1 downloadable file groups with a total of 4 files
2017-07-21 08:17:46.085 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading group: "Docker Set"
2017-07-21 08:17:46.086 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 1/4
2017-07-21 08:17:46.087 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.088 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:46.091 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 2/4
2017-07-21 08:17:46.093 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", SizeInBytes: 119, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.094 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:17:46.101 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 3/4
2017-07-21 08:17:46.101 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.101 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:17:46.102 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] Downloading file 4/4
2017-07-21 08:17:46.103 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] From: HttpServerFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", SizeInBytes: 0, Time: 07/21/2017 08:17:09 }
2017-07-21 08:17:46.104 +00:00 [DBG] [Unity.Publishing.Activity.Releases.DownloadHttpFileServerFilesActivity] To: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:46.106 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.108 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.110 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.112 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.121 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.121 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Download the artifacts"
2017-07-21 08:17:46.122 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"buildId\": \"<set by run options>\",
  \"stateValueRepositoryKey\": \"FileDownloadInfo\"
}"
2017-07-21 08:17:46.124 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"c3d5d2b7-3bde-462c-924c-f788462e0737\"
}"
2017-07-21 08:17:46.125 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
PersistBuildArtifactsOptions { StateValueRepositoryKey: "FileDownloadInfo", BuildId: c3d5d2b7-3bde-462c-924c-f788462e0737 }
2017-07-21 08:17:46.132 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Persists the artifacts info after download"
2017-07-21 08:17:46.134 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.135 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.144 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.145 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.148 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.149 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting artifact info for build: c3d5d2b7-3bde-462c-924c-f788462e0737
2017-07-21 08:17:46.150 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Getting downloaded artifacts from state value repository using key: "FileDownloadInfo"
2017-07-21 08:17:46.151 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:46.154 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.156 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:46.157 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.160 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.161 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.166 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p1='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "BuildArtifacts" SET "Md5Hash" = @p0
WHERE "Id" = @p1;
2017-07-21 08:17:46.167 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.172 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.173 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo", Md5Hash: System.Byte[] }
2017-07-21 08:17:46.175 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.177 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:46.183 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.186 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.187 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.189 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p1='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "BuildArtifacts" SET "Md5Hash" = @p0
WHERE "Id" = @p1;
2017-07-21 08:17:46.192 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.202 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.203 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:46.204 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.205 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:46.206 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.206 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.207 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.208 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p1='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "BuildArtifacts" SET "Md5Hash" = @p0
WHERE "Id" = @p1;
2017-07-21 08:17:46.208 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.214 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.216 +00:00 [DBG] [Unity.Publishing.Activity.Releases.PersistBuildArtifactsActivity] Persisting file: DownloadedFileInfo { Url: "http://katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Filename: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt", Md5Hash: System.Byte[] }
2017-07-21 08:17:46.216 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.218 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@__buildId_0='?', @__filename_1='?'], CommandType='Text', CommandTimeout='30']
SELECT "a"."Id", "a"."BuildId", "a"."Filename", "a"."Md5Hash", "a"."Url"
FROM "BuildArtifacts" AS "a"
WHERE ("a"."BuildId" = @__buildId_0) AND ("a"."Filename" = @__filename_1)
LIMIT 1
2017-07-21 08:17:46.219 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.219 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.219 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.221 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p1='?', @p0='?'], CommandType='Text', CommandTimeout='30']
UPDATE "BuildArtifacts" SET "Md5Hash" = @p0
WHERE "Id" = @p1;
2017-07-21 08:17:46.221 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.223 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.224 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.225 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.227 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.228 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.231 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.232 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Ending activity "Persists the artifacts info after download"
2017-07-21 08:17:46.233 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:17:46.235 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:17:46.238 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:17:46.241 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:17:46.244 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.245 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.247 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.250 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.255 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.256 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:17:46.257 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:17:46.259 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:17:46.259 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:17:46.264 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.265 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:17:46.268 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:17:46.269 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:17:46.273 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:17:46.622 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:58.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:17:49.528 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:18:01.659 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:18:01.668 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.672 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a0d44511-470c-454c-badd-8741cb217903')
2017-07-21 08:18:01.674 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.675 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:18:01.677 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:18:01.678 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 08:18:01.679 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 08:18:01.680 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:18:01.682 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:18:01.685 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:18:01.687 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:18:01.691 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.691 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:18:01.697 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:18:01.698 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:18:01.702 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.703 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:18:01.703 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:18:01.704 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:18:01.705 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:18:01.707 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.708 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:18:01.710 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:18:01.712 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:18:01.715 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.719 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:18:01.719 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.720 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:01.723 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:18:02.078 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 2 of 10 will be performed in 00:01:12.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:18:49.590 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:18:49.597 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:18:49.602 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:49.604 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 08:18:49.609 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:49.609 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:18:49.611 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:18:49.613 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 08:18:49.614 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 08:18:49.615 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:18:49.619 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:18:49.621 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:18:49.625 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:18:49.627 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:49.629 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:18:49.632 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:18:49.633 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:18:49.636 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:49.639 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:18:49.640 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:18:49.641 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:18:49.642 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:18:49.644 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:49.646 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:18:49.648 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:18:49.649 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:18:49.653 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:18:50.000 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 3 of 10 will be performed in 00:00:43.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:19:00.603 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:00.609 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:19:00.612 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:00.614 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:19:19.638 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:19:20.068 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:19:20.076 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.080 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a0d44511-470c-454c-badd-8741cb217903')
2017-07-21 08:19:20.083 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.084 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:19:20.086 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:19:20.087 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 08:19:20.088 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 08:19:20.090 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:19:20.091 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:19:20.092 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:19:20.093 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:19:20.094 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.094 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:20.096 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:20.097 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:20.100 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.101 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:19:20.104 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:19:20.106 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:19:20.108 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:19:20.111 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.113 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:20.115 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:20.116 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:20.127 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:20.469 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 3 of 10 will be performed in 00:01:01.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:19:34.692 +00:00 [INF] [] 2 scheduled job(s) enqueued.
2017-07-21 08:19:34.707 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:19:34.717 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.719 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a16af5a9-d652-4504-8990-667b172b2aff')
2017-07-21 08:19:34.721 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.722 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a16af5a9-d652-4504-8990-667b172b2aff from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 08:19:34.727 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"a534abcc-42c3-49c2-91ae-325da782c295\"
}"
2017-07-21 08:19:34.730 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: a534abcc-42c3-49c2-91ae-325da782c295 }
2017-07-21 08:19:34.738 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:19:34.741 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:19:34.743 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.745 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:34.751 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.753 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 08:19:34.755 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.757 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:19:34.758 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:19:34.759 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 08:19:34.759 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 08:19:34.761 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:19:34.753 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:34.763 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:34.767 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:19:34.768 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:19:34.769 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:19:34.771 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.772 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:34.775 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:34.777 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:34.778 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.781 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.783 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:19:34.784 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:19:34.784 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:19:34.785 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:19:34.788 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.790 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:34.792 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:34.794 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:34.796 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.799 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.801 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 08:19:34.803 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.804 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.805 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:34.808 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 08:19:34.813 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.814 +00:00 [ERR] [Microsoft.EntityFrameworkCore.DbContext] An exception occurred in the database while saving changes.

Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
2017-07-21 08:19:34.830 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:34.832 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:19:34.836 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:19:34.837 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:19:34.841 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:19:35.155 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 4 of 10 will be performed in 00:02:52.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:19:35.503 +00:00 [WRN] [] Failed to process the job '35458': an exception occurred. Retry attempt 9 of 10 will be performed in 01:10:46.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Services.Repositories.BuildRepository.<RegisterJobCorrelationId>d__10.MoveNext() in /app/src/Publishing.Services/Repositories/BuildRepository.cs:line 132
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Engine.Managers.BuildManager.<RegisterJobCorrelationId>d__14.MoveNext() in /app/src/Publishing.Engine/Managers/BuildManager.cs:line 282
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Activity.Releases.RegisterBuildJobCorrelationIdActivity.<PerformAsync>d__3.MoveNext() in /app/src/Publishing.Activity.Releases/RegisterBuildJobCorrelationIdActivity.cs:line 27
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:20:00.682 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:00.688 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:20:00.690 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:00.693 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:20:00.713 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:00.718 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 08:20:00.720 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:00.721 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 08:20:21.647 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:20:30.735 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 08:20:30.742 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:30.746 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a0d44511-470c-454c-badd-8741cb217903')
2017-07-21 08:20:30.748 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:30.748 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 08:20:30.748 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 08:20:30.748 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 08:20:30.748 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 08:20:30.751 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 08:20:30.758 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 08:20:30.760 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 08:20:30.761 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 08:20:30.764 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:30.768 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:20:30.774 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:20:30.778 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:20:30.784 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:30.786 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 08:20:30.788 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 08:20:30.789 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 08:20:30.792 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 08:20:30.795 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:30.796 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 08:20:30.802 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 08:20:30.804 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 08:20:30.809 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:20:31.157 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 4 of 10 will be performed in 00:01:44.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 08:21:00.756 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:21:00.771 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (11ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:21:00.773 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:21:00.774 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:22:00.754 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:22:00.762 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 08:22:00.765 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 08:22:00.770 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 08:22:19.838 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 08:22:30.800 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 5 of 10 will be performed in 00:04:36.
StackExchange.Redis.RedisConnectionException: No connection is available to service this operation: GET Unity.Publishing.Engine.Configuration.JobSpecification:041b894d-682f-4000-ad22-b044e5e8c024; SocketClosed on 172.18.0.4:6379/Subscription, origin: ProcessReadBytes, input-buffer: 0, outstanding: 0, last-read: 10s ago, last-write: 10s ago, unanswered-write: 67818s ago, keep-alive: 60s, pending: 0, state: ConnectedEstablished, in: 0, ar: 0, last-heartbeat: 0s ago, last-mbeat: 0s ago, global: 0s ago ---> StackExchange.Redis.RedisConnectionException: SocketClosed on 172.18.0.4:6379/Subscription, origin: ProcessReadBytes, input-buffer: 0, outstanding: 0, last-read: 10s ago, last-write: 10s ago, unanswered-write: 67818s ago, keep-alive: 60s, pending: 0, state: ConnectedEstablished, in: 0, ar: 0, last-heartbeat: 0s ago, last-mbeat: 0s ago, global: 0s ago
   --- End of inner exception stack trace ---
   at StackExchange.Redis.ConnectionMultiplexer.ThrowFailed[T](TaskCompletionSource`1 source, Exception unthrownException)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Configuration.RedisJobSpecificationRepository.<GetByIdAsync>d__4`1.MoveNext() in /app/src/Publishing.Engine/Configuration/RedisJobSpecificationRepository.cs:line 40
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 57
2017-07-21 08:22:34.872 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 09:46:21.801 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Waiting for server dependencies to come up
2017-07-21 09:46:21.845 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Postgres database" on "postgres" port 5432
2017-07-21 09:46:21.888 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Hangfire database" on "hangfire-db" port 5432
2017-07-21 09:46:21.891 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Trying to connect to "Redis database" on "repo-cache" port 6379
2017-07-21 09:46:22.244 +00:00 [INF] [] Start installing Hangfire SQL objects...
2017-07-21 09:46:22.268 +00:00 [INF] [] Hangfire SQL objects installed.
2017-07-21 09:46:22.488 +00:00 [INF] [Unity.Publishing.Engine.Configuration.ConfigurationReader] File "../../jobs.Docker.json" is read for environment - "Docker" 
2017-07-21 09:46:22.848 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Starting application in Docker environment ...
2017-07-21 09:46:22.857 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 09:46:22.858 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 09:46:22.859 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 09:46:22.859 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 09:46:22.859 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 09:46:22.860 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 09:46:22.860 +00:00 [INF] []     Worker count: 1
2017-07-21 09:46:22.860 +00:00 [INF] []     Listening queues: 'stripagent01'
2017-07-21 09:46:22.861 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 09:46:22.861 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 09:46:22.873 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 09:46:22.874 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 09:46:22.874 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 09:46:22.874 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 09:46:22.874 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 09:46:22.875 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 09:46:22.875 +00:00 [INF] []     Worker count: 1
2017-07-21 09:46:22.875 +00:00 [INF] []     Listening queues: 'stripagent02'
2017-07-21 09:46:22.875 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 09:46:22.876 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 09:46:22.878 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 09:46:22.883 +00:00 [INF] [] Starting Hangfire Server
2017-07-21 09:46:22.884 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 09:46:22.884 +00:00 [INF] [] Using job storage: 'PostgreSQL Server: Host: hangfire-db, DB: hangfire, Schema: hangfire'
2017-07-21 09:46:22.900 +00:00 [INF] [] Using the following options for SQL Server job storage:
2017-07-21 09:46:22.900 +00:00 [INF] []     Queue poll interval: 00:00:15.
2017-07-21 09:46:22.900 +00:00 [INF] []     Invisibility timeout: 1.00:00:00.
2017-07-21 09:46:22.901 +00:00 [INF] [] Using the following options for Hangfire Server:
2017-07-21 09:46:22.901 +00:00 [INF] []     Worker count: 4
2017-07-21 09:46:22.901 +00:00 [INF] []     Listening queues: 'default'
2017-07-21 09:46:22.901 +00:00 [INF] []     Shutdown timeout: 00:00:15
2017-07-21 09:46:22.901 +00:00 [INF] []     Schedule polling interval: 00:00:15
2017-07-21 09:46:22.911 +00:00 [DBG] [] Background process 'BackgroundProcessingServer' started.
2017-07-21 09:46:23.091 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 09:46:23.102 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 09:46:23.115 +00:00 [DBG] [] Background process 'ServerHeartbeat' started.
2017-07-21 09:46:23.132 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 09:46:23.139 +00:00 [INF] [] 3 servers were removed due to timeout
2017-07-21 09:46:23.142 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 09:46:23.147 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 09:46:23.150 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 09:46:23.174 +00:00 [DBG] [] Background process 'ServerWatchdog' started.
2017-07-21 09:46:23.154 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 09:46:23.183 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 09:46:23.192 +00:00 [DBG] [] Background process 'Worker #5dc75962' started.
2017-07-21 09:46:23.195 +00:00 [DBG] [] Background process 'Worker #dda5d402' started.
2017-07-21 09:46:23.204 +00:00 [INF] [] Removed 221 outdated record(s) from 'counter' table.
2017-07-21 09:46:23.206 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 09:46:23.219 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 09:46:23.222 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 09:46:23.233 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 09:46:23.237 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 09:46:23.263 +00:00 [DBG] [] Background process 'SQL Records Expiration Manager' started.
2017-07-21 09:46:23.263 +00:00 [DBG] [] Removing outdated records from table 'counter'...
2017-07-21 09:46:23.266 +00:00 [DBG] [] Background process 'Worker #1dd8ac8a' started.
2017-07-21 09:46:23.280 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 09:46:23.284 +00:00 [INF] [] Removed 92 outdated record(s) from 'job' table.
2017-07-21 09:46:23.295 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 09:46:23.303 +00:00 [DBG] [] Background process 'Worker #980bfdc2' started.
2017-07-21 09:46:23.307 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 09:46:23.313 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 09:46:23.328 +00:00 [DBG] [] Background process 'Worker #9d46b258' started.
2017-07-21 09:46:23.358 +00:00 [INF] [Unity.Publishing.Server.ConsoleHost.ConsoleHost] Started application
2017-07-21 09:46:23.358 +00:00 [INF] [ConsoleHost.Run] Press Ctrl-C to shut down.
2017-07-21 09:46:23.359 +00:00 [DBG] [] Background process 'Worker #99a180bf' started.
2017-07-21 09:46:23.369 +00:00 [DBG] [] Background process 'DelayedJobScheduler' started.
2017-07-21 09:46:23.386 +00:00 [DBG] [] Background process 'RecurringJobScheduler' started.
2017-07-21 09:46:23.643 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 09:46:23.649 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 09:46:23.678 +00:00 [INF] [] 4 scheduled job(s) enqueued.
2017-07-21 09:46:24.243 +00:00 [DBG] [] Removing outdated records from table 'job'...
2017-07-21 09:46:24.245 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 09:46:24.246 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 09:46:24.248 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 09:46:24.286 +00:00 [DBG] [] Removing outdated records from table 'list'...
2017-07-21 09:46:24.287 +00:00 [DBG] [] Removing outdated records from table 'set'...
2017-07-21 09:46:24.288 +00:00 [DBG] [] Removing outdated records from table 'hash'...
2017-07-21 09:46:24.748 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'from JobActivityHistoryEntry entry in DbSet<JobActivityHistoryEntry>
where 
    (from Guid <generated>_1 in __jobCorrelationIds_0
    select <generated>_1)
    .Contains([entry].JobCorrelationId)
select entry'
2017-07-21 09:46:24.791 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'from JobActivityHistoryEntry entry in DbSet<JobActivityHistoryEntry>
where 
    (from Guid <generated>_1 in __jobCorrelationIds_0
    select <generated>_1)
    .Contains([entry].JobCorrelationId)
select entry'
2017-07-21 09:46:25.166 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: True
(QueryContext queryContext) => IEnumerable<JobActivityHistoryEntry> _ShapedQuery(
    queryContext: queryContext, 
    shaperCommandContext: SelectExpression: 
        SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
        FROM "JobActivityHistoryEntries" AS "entry"
        WHERE 0 = 1
    , 
    shaper: UnbufferedEntityShaper<JobActivityHistoryEntry>
)

2017-07-21 09:46:25.223 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 09:46:25.239 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Build Source Code Delivery"
2017-07-21 09:46:25.239 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 09:46:25.296 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:25.297 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:25.911 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:26.937 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.050 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('12a725b6-f40a-4c55-ab5a-fc7ac1a67829')
2017-07-21 09:46:27.050 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 09:46:27.074 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.094 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 12a725b6-f40a-4c55-ab5a-fc7ac1a67829 from spec options:
"{
  \"revision\": \"\"
}"
2017-07-21 09:46:27.104 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.106 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a7e5634d-50af-4b38-b520-d10aefdefa56')
2017-07-21 09:46:27.115 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a16af5a9-d652-4504-8990-667b172b2aff')
2017-07-21 09:46:27.124 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('a0d44511-470c-454c-badd-8741cb217903')
2017-07-21 09:46:27.140 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"shellServerInfo\": {
    \"host\": \"localhost\",
    \"portNumber\": 2201,
    \"username\": \"builduser\",
    \"password\": \"superman\",
    \"privateRsaKeyPath\": \"/var/buildserverssh/id_rsa\"
  },
  \"revision\": \"2017.1.0b1\",
  \"customerRepositoryPath\": \"unity-2017/unity-2017-pcmac-android-bb10-ios-linux-wm\",
  \"repositoryName\": \"unity2017_repo-pcmac-linux-ios-android-wm-bb10\",
  \"platforms\": [
    \"pcmac\",
    \"linux\",
    \"ios\",
    \"android\",
    \"wm\",
    \"bb10\"
  ],
  \"scdPublicationId\": \"93a40b55-6e69-455c-afd6-21fa8dcfd7f1\",
  \"scdVersionNameTag\": \"unity2017_repo\",
  \"scKallitheaBaseUrl\": \"http://172.18.0.1:3080\",
  \"releaseTrackName\": \"2017.1\",
  \"sourceRepoPath\": null,
  \"onoBaseUrl\": \"https://ono.unity3d.com\"
}"
2017-07-21 09:46:27.212 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.214 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a16af5a9-d652-4504-8990-667b172b2aff from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 09:46:27.220 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
ScdStrippingOptions { ShellServerInfo: ShellServerInfo { Host: "localhost", PortNumber: 2201, Username: "builduser", Password: "superman", PrivateRsaKeyPath: "/var/buildserverssh/id_rsa" }, Revision: "2017.1.0b1", ReleaseTrackName: "2017.1", ScKallitheaBaseUrl: "http://172.18.0.1:3080", OnoBaseUrl: "https://ono.unity3d.com", ScdVersionNameTag: "unity2017_repo", ScdPublicationId: 93a40b55-6e69-455c-afd6-21fa8dcfd7f1, SourceRepoPath: null, CustomerRepositoryPath: "unity-2017/unity-2017-pcmac-android-bb10-ios-linux-wm", RepositoryName: "unity2017_repo-pcmac-linux-ios-android-wm-bb10", Platforms: ["pcmac", "linux", "ios", "android", "wm", "bb10"] }
2017-07-21 09:46:27.248 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.256 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 09:46:27.257 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 09:46:27.257 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 09:46:27.257 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 09:46:27.257 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.257 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a0d44511-470c-454c-badd-8741cb217903 from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 09:46:27.249 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.258 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 09:46:27.258 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 09:46:27.258 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 09:46:27.259 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id a7e5634d-50af-4b38-b520-d10aefdefa56 from spec options:
"{
  \"buildId\": \"<set by run options>\"
}"
2017-07-21 09:46:27.259 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 09:46:27.259 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 09:46:27.255 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"a534abcc-42c3-49c2-91ae-325da782c295\"
}"
2017-07-21 09:46:27.274 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"buildId\": \"a534abcc-42c3-49c2-91ae-325da782c295\"
}"
2017-07-21 09:46:27.274 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 09:46:27.276 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 09:46:27.281 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 09:46:27.281 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 09:46:27.289 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: a534abcc-42c3-49c2-91ae-325da782c295 }
2017-07-21 09:46:27.291 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 09:46:27.296 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 09:46:27.289 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
RegisterBuildJobCorrelationIdActivityOptions { BuildId: a534abcc-42c3-49c2-91ae-325da782c295 }
2017-07-21 09:46:27.301 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 09:46:27.311 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 09:46:27.350 +00:00 [WRN] [] Failed to process the job '35393': an exception occurred. Retry attempt 10 of 10 will be performed in 01:50:06.
System.AggregateException: AsyncHelpers.Run method threw an exception. (Exception has been thrown by the target of an invocation.) ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentNullException: Value cannot be null.
Parameter name: RepositoryName
   at Unity.Publishing.Abstractions.VerificationExtensions.VerifyIsNotNullOrEmpty(String value, String name) in /app/src/Publishing.Abstractions/Helpers.cs:line 95
   at Unity.Publishing.Activity.SourceCodeHosting.ScdPublishing.InitScdRepoForStrippingActivity..ctor(ScdStrippingOptions options, ILoggerFactory loggerFactory, IKallitheaService kallitheaService) in /app/src/Publishing.Activity.SourceCodeHosting/ScdPublishing/InitScdRepoForStrippingActivity.cs:line 52
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, Object[] args)
   at Unity.Publishing.Server.Execution.ActivityFactory.CreateActivity(IActivitySpecification activitySpecification, Object jobOptions, Guid correlationId) in /app/src/Publishing.Server/Execution/ActivityFactory.cs:line 160
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 77
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Abstractions.AsyncHelpers.<>c__DisplayClass0_0.<<RunSync>b__0>d.MoveNext() in /app/src/Publishing.Abstractions/AsyncHelpers.cs:line 24
   --- End of inner exception stack trace ---
   at Unity.Publishing.Abstractions.AsyncHelpers.ExclusiveSynchronizationContext.BeginMessageLoop() in /app/src/Publishing.Abstractions/AsyncHelpers.cs:line 113
   at Unity.Publishing.Abstractions.AsyncHelpers.RunSync(Func`1 task) in /app/src/Publishing.Abstractions/AsyncHelpers.cs:line 31
   at Unity.Publishing.Engine.Execution.ActivityJob.RunJobSynchronously(Guid jobSpecId, Guid correlationId, PerformContext performContext, IJobCancellationToken cancellationToken) in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 49
---> (Inner Exception #0) System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentNullException: Value cannot be null.
Parameter name: RepositoryName
   at Unity.Publishing.Abstractions.VerificationExtensions.VerifyIsNotNullOrEmpty(String value, String name) in /app/src/Publishing.Abstractions/Helpers.cs:line 95
   at Unity.Publishing.Activity.SourceCodeHosting.ScdPublishing.InitScdRepoForStrippingActivity..ctor(ScdStrippingOptions options, ILoggerFactory loggerFactory, IKallitheaService kallitheaService) in /app/src/Publishing.Activity.SourceCodeHosting/ScdPublishing/InitScdRepoForStrippingActivity.cs:line 52
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, StackCrawlMark& stackMark)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, Object[] args)
   at Unity.Publishing.Server.Execution.ActivityFactory.CreateActivity(IActivitySpecification activitySpecification, Object jobOptions, Guid correlationId) in /app/src/Publishing.Server/Execution/ActivityFactory.cs:line 160
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 77
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Abstractions.AsyncHelpers.<>c__DisplayClass0_0.<<RunSync>b__0>d.MoveNext() in /app/src/Publishing.Abstractions/AsyncHelpers.cs:line 24<---

2017-07-21 09:46:27.547 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.548 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.548 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.547 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.566 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:27.566 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:27.566 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:27.566 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:27.728 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:27.728 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (23ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:27.729 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (20ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:27.730 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (24ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:27.739 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:27.740 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:27.740 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:27.740 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:27.744 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.745 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.751 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.751 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.778 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 09:46:27.781 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 09:46:27.803 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 09:46:27.804 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 09:46:27.805 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 09:46:27.807 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.807 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:27.817 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:27.817 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:27.820 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:27.823 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 09:46:28.021 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IAsyncEnumerable<bool> _ToSequence(
    task: Task<bool> GetResult(
        valueBuffers: IAsyncEnumerable<ValueBuffer> _Query(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT CASE
                    WHEN EXISTS (
                        SELECT 1
                        FROM "BuildJobs" AS "j"
                        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
                    THEN TRUE::bool ELSE FALSE::bool
                END
            , 
            queryIndex: default(System.Nullable`1[System.Int32])
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 09:46:28.022 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 09:46:28.022 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 09:46:28.023 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 09:46:28.023 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 09:46:28.024 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.025 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:28.032 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 09:46:28.033 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from BuildJob j in DbSet<BuildJob>
where j.BuildId == __buildId_0 && j.CorrelationId == __correlationId_1
select j)
.Any()'
2017-07-21 09:46:28.038 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (12ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:28.040 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:28.045 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IAsyncEnumerable<bool> _ToSequence(
    task: Task<bool> GetResult(
        valueBuffers: IAsyncEnumerable<ValueBuffer> _Query(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT CASE
                    WHEN EXISTS (
                        SELECT 1
                        FROM "BuildJobs" AS "j"
                        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
                    THEN TRUE::bool ELSE FALSE::bool
                END
            , 
            queryIndex: default(System.Nullable`1[System.Int32])
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 09:46:28.046 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.077 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.079 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.092 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (9ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 09:46:28.098 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (15ms) [Parameters=[@__buildId_0='?', @__correlationId_1='?'], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM "BuildJobs" AS "j"
        WHERE ("j"."BuildId" = @__buildId_0) AND ("j"."CorrelationId" = @__correlationId_1))
    THEN TRUE::bool ELSE FALSE::bool
END
2017-07-21 09:46:28.110 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.111 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.128 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.128 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.129 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:28.128 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:28.163 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 09:46:28.170 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (12ms) [Parameters=[@p0='?', @p1='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "BuildJobs" ("BuildId", "CorrelationId")
VALUES (@p0, @p1);
2017-07-21 09:46:28.173 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.171 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.181 +00:00 [ERR] [Microsoft.EntityFrameworkCore.DbContext] An exception occurred in the database while saving changes.

Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
2017-07-21 09:46:28.195 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.195 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:28.196 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:28.197 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:28.200 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.205 +00:00 [ERR] [Microsoft.EntityFrameworkCore.DbContext] An exception occurred in the database while saving changes.

Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
2017-07-21 09:46:28.223 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.224 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:46:28.226 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:46:28.226 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:46:28.229 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:46:28.872 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 5 of 10 will be performed in 00:06:06.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 09:46:28.879 +00:00 [WRN] [] Failed to process the job '35616': an exception occurred. Retry attempt 6 of 10 will be performed in 00:12:34.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 09:46:28.966 +00:00 [WRN] [] Failed to process the job '35457': an exception occurred. Retry attempt 10 of 10 will be performed in 01:52:56.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Services.Repositories.BuildRepository.<RegisterJobCorrelationId>d__10.MoveNext() in /app/src/Publishing.Services/Repositories/BuildRepository.cs:line 132
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Engine.Managers.BuildManager.<RegisterJobCorrelationId>d__14.MoveNext() in /app/src/Publishing.Engine/Managers/BuildManager.cs:line 282
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Activity.Releases.RegisterBuildJobCorrelationIdActivity.<PerformAsync>d__3.MoveNext() in /app/src/Publishing.Activity.Releases/RegisterBuildJobCorrelationIdActivity.cs:line 27
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 09:46:29.256 +00:00 [WRN] [] Failed to process the job '35458': an exception occurred. Retry attempt 10 of 10 will be performed in 01:50:26.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Npgsql.PostgresException: 23503: insert or update on table "BuildJobs" violates foreign key constraint "FK_BuildJobs_Builds_BuildId"
   at Npgsql.NpgsqlConnector.<DoReadMessage>d__148.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlConnector.<ReadMessage>d__147.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlDataReader.<NextResult>d__31.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlDataReader.<NextResultAsync>d__30.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Npgsql.NpgsqlCommand.<Execute>d__70.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReader>d__91.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at System.Runtime.CompilerServices.ValueTaskAwaiter`1.GetResult()
   at Npgsql.NpgsqlCommand.<ExecuteDbDataReaderAsync>d__89.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Storage.Internal.RelationalCommand.<ExecuteAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.<ExecuteAsync>d__32.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__54.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__52.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Services.Repositories.BuildRepository.<RegisterJobCorrelationId>d__10.MoveNext() in /app/src/Publishing.Services/Repositories/BuildRepository.cs:line 132
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Engine.Managers.BuildManager.<RegisterJobCorrelationId>d__14.MoveNext() in /app/src/Publishing.Engine/Managers/BuildManager.cs:line 282
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
   at Unity.Publishing.Activity.Releases.RegisterBuildJobCorrelationIdActivity.<PerformAsync>d__3.MoveNext() in /app/src/Publishing.Activity.Releases/RegisterBuildJobCorrelationIdActivity.cs:line 27
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 09:47:00.368 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'(from ScdPublication p in DbSet<ScdPublication>
where (int) p.Status == (int) __status_0
select p)
.Count()'
2017-07-21 09:47:00.369 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'(from ScdPublication p in DbSet<ScdPublication>
where (int) p.Status == (int) __status_0
select p)
.Count()'
2017-07-21 09:47:00.387 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IAsyncEnumerable<int> _ToSequence(
    task: Task<int> GetResult(
        valueBuffers: IAsyncEnumerable<ValueBuffer> _Query(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT COUNT(*)::INT4
                FROM "ScdPublications" AS "p"
                WHERE "p"."Status" = @__status_0
            , 
            queryIndex: default(System.Nullable`1[System.Int32])
        )
        , 
        cancellationToken: queryContext.CancellationToken
    )
)

2017-07-21 09:47:00.390 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:47:00.397 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:47:00.399 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:47:00.424 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:47:00.500 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Compiling query model: 
'from IGrouping<string, Build> g in 
    (from Build b in DbSet<Build>
    where (int) b.Status == 6 && b.Version != null && !(
        (from ScdPublication <generated>_1 in b.ScdPublications
        select <generated>_1)
        .Any()) && !(
        (from ScdPublication p in DbSet<ScdPublication>
        where p.VersionTag == b.Version
        select p)
        .Any())
    select b)
    .GroupBy([b].RevisionShort, [b])
select 
    (from Build <generated>_1 in g
    select <generated>_1)
    .First()'
2017-07-21 09:47:00.518 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] Optimized query model: 
'from IGrouping<string, Build> g in 
    (from Build b in DbSet<Build>
    where (int) b.Status == 6 && b.Version != null && !(
        (from ScdPublication <generated>_1 in DbSet<ScdPublication>
        where (Nullable<Guid>) Property(b, "Id") == Property(<generated>_1, "BuildId")
        select <generated>_1)
        .Any()) && !(
        (from ScdPublication p in DbSet<ScdPublication>
        where p.VersionTag == b.Version
        select p)
        .Any())
    select b)
    .GroupBy([b].RevisionShort, [b])
select 
    (from Build <generated>_1 in g
    select <generated>_1)
    .First()'
2017-07-21 09:47:00.563 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'GroupBy([b].RevisionShort, [b])' could not be translated and will be evaluated locally.
2017-07-21 09:47:00.571 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'GroupBy([b].RevisionShort, [b])' could not be translated and will be evaluated locally.
2017-07-21 09:47:00.575 +00:00 [WRN] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] The LINQ expression 'First()' could not be translated and will be evaluated locally.
2017-07-21 09:47:00.586 +00:00 [DBG] [Microsoft.EntityFrameworkCore.Query.Internal.NpgsqlQueryCompilationContextFactory] TRACKED: False
(QueryContext queryContext) => IEnumerable<Build> _Select(
    source: IEnumerable<IGrouping<string, Build>> _GroupBy(
        source: IEnumerable<Build> _ShapedQuery(
            queryContext: queryContext, 
            shaperCommandContext: SelectExpression: 
                SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
                FROM "Builds" AS "b"
                WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
                    SELECT 1
                    FROM "ScdPublications" AS "s"
                    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
                    SELECT 1
                    FROM "ScdPublications" AS "p"
                    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
                ORDER BY "b"."RevisionShort"
            , 
            shaper: BufferedEntityShaper<Build>
        )
        , 
        keySelector: (Build b) => b.RevisionShort, 
        elementSelector: (Build b) => b
    )
    , 
    selector: (IGrouping<string, Build> g) => Build First(
        source: g
    )
)

2017-07-21 09:47:00.591 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:47:00.593 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 09:47:00.596 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:47:00.597 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 09:48:00.367 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:48:00.377 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:48:00.379 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:48:00.380 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:49:00.466 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:49:00.472 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:49:00.472 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:49:00.472 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:50:00.479 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:50:00.482 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:50:00.483 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:50:00.483 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:50:00.503 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:50:00.505 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 09:50:00.506 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:50:00.506 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 09:51:00.521 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:51:00.524 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (2ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:51:00.524 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:51:00.525 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:52:00.587 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:00.594 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (6ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:52:00.594 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:00.595 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:52:38.936 +00:00 [INF] [] 1 scheduled job(s) enqueued.
2017-07-21 09:52:45.608 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting job "Promote build"
2017-07-21 09:52:45.612 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:45.614 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "entry"."Id", "entry"."ActivityDisplayName", "entry"."ActivityId", "entry"."Duration", "entry"."ExceptionMessage", "entry"."ExceptionStackTrace", "entry"."JobCorrelationId", "entry"."Status", "entry"."Timestamp"
FROM "JobActivityHistoryEntries" AS "entry"
WHERE "entry"."JobCorrelationId" IN ('69db0d71-be82-4545-8a0a-472cd3e3004d')
2017-07-21 09:52:45.616 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:45.616 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Registers the job correlation id on the build for use in progress reporting"
2017-07-21 09:52:45.617 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Get the artifact file list"
2017-07-21 09:52:45.617 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Download the artifacts"
2017-07-21 09:52:45.618 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Skipping activity "Persists the artifacts info after download"
2017-07-21 09:52:45.619 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Building options for correlation id 69db0d71-be82-4545-8a0a-472cd3e3004d from spec options:
"{
  \"sourceRootPath\": \"/app/tmp/\",
  \"sourceSubPath\": \"<set by run options>\",
  \"server\": \"docker-server\",
  \"uploadRootPath\": \"/home/sftp-user/\",
  \"uploadSubPath\": \"<set by run options>\",
  \"filesets\": [
    \"Docker Set\"
  ],
  \"uploadHistoryStateKey\": \"UploadedEditorInstallerFiles\"
}"
2017-07-21 09:52:45.620 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Merging current option with run options:
"{
  \"sourceSubPath\": \"katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/\",
  \"uploadSubPath\": \"1\"
}"
2017-07-21 09:52:45.621 +00:00 [DBG] [Unity.Publishing.Server.Execution.ActivityFactory] Final options:
UploadFilesToServerActivityOptions { Server: "docker-server", SourceRootPath: "/app/tmp/", SourceSubPath: "katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/", UploadRootPath: "/home/sftp-user/", UploadSubPath: "1", Filesets: ["Docker Set"], UploadHistoryStateKey: "UploadedEditorInstallerFiles" }
2017-07-21 09:52:45.622 +00:00 [INF] [Unity.Publishing.Engine.Execution.ActivityJob] Starting activity "Upload editor installers and extras to beta server using sftp"
2017-07-21 09:52:45.623 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:45.623 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:52:45.625 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:52:45.627 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:52:45.630 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:45.631 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Looking for existing files in "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/"
2017-07-21 09:52:45.632 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifact.txt"
2017-07-21 09:52:45.632 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/buildInfo"
2017-07-21 09:52:45.633 +00:00 [DBG] [Unity.Publishing.Activity.Releases.UploadFilesToServerActivity] Found file: "/app/tmp/katana_artifacts/proj0-zCompleteBuild_2_21_07_2017_08_17_09_+0000/releasableartifacts/artifacts/artifact1.txt"
2017-07-21 09:52:45.635 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:45.635 +00:00 [DBG] [Npgsql.NpgsqlConnection] Beginning transaction with isolation level 'Unspecified'.
2017-07-21 09:52:45.637 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "JobActivityHistoryEntries" ("Id", "ActivityDisplayName", "ActivityId", "Duration", "ExceptionMessage", "ExceptionStackTrace", "JobCorrelationId", "Status", "Timestamp")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2017-07-21 09:52:45.637 +00:00 [DBG] [Npgsql.NpgsqlConnection] Committing transaction.
2017-07-21 09:52:45.641 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:52:46.297 +00:00 [WRN] [] Failed to process the job '35617': an exception occurred. Retry attempt 6 of 10 will be performed in 00:13:10.
System.Exception: Unknown server type: 
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.ResolveFileUpload(ServerSpecification server) in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 199
   at Unity.Publishing.Activity.Releases.UploadFilesToServerActivity.<PerformAsync>d__10.MoveNext() in /app/src/Publishing.Activity.Releases/UploadFilesToServerActivity.cs:line 85
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 89
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Unity.Publishing.Engine.Execution.ActivityJob.<RunJob>d__8.MoveNext() in /app/src/Publishing.Engine/Execution/ActivityJob.cs:line 121
2017-07-21 09:53:00.632 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:53:00.635 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:53:00.636 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:53:00.637 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:54:00.700 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:54:00.714 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (11ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:54:00.715 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:54:00.716 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:55:00.716 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:55:00.726 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (7ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:55:00.727 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:55:00.728 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:55:00.772 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:55:00.774 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT "b"."Id", "b"."ArtifactsUrl", "b"."Branch", "b"."BuilderName", "b"."EndTime", "b"."Number", "b"."Result", "b"."ResultText", "b"."RevisionShort", "b"."ScdVersionId", "b"."StartTime", "b"."Status", "b"."Url", "b"."Version"
FROM "Builds" AS "b"
WHERE ((("b"."Status" = 6) AND "b"."Version" IS NOT NULL) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "s"
    WHERE "b"."Id" = "s"."BuildId")) AND NOT EXISTS (
    SELECT 1
    FROM "ScdPublications" AS "p"
    WHERE ("p"."VersionTag" = "b"."Version") OR ("p"."VersionTag" IS NULL AND "b"."Version" IS NULL))
ORDER BY "b"."RevisionShort"
2017-07-21 09:55:00.775 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:55:00.775 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] Added 0 new ScdPublications
2017-07-21 09:56:00.790 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:56:00.802 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (9ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:56:00.803 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:56:00.803 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:57:00.802 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:57:00.808 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (5ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:57:00.809 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:57:00.809 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
2017-07-21 09:58:00.860 +00:00 [DBG] [Npgsql.NpgsqlConnection] Opening connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:58:00.864 +00:00 [INF] [Microsoft.EntityFrameworkCore.Storage.IRelationalCommandBuilderFactory] Executed DbCommand (3ms) [Parameters=[@__status_0='?'], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)::INT4
FROM "ScdPublications" AS "p"
WHERE "p"."Status" = @__status_0
2017-07-21 09:58:00.865 +00:00 [DBG] [Npgsql.NpgsqlConnection] Closing connection to database 'Kunai' on server 'tcp://postgres:5432'.
2017-07-21 09:58:00.866 +00:00 [INF] [Unity.Publishing.Engine.Managers.ScdPublicationManager] There is no unpublished Source Code Deliveries
